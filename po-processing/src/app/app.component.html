<router-outlet></router-outlet>

<div class="container-fluid">
  <h1>PO Form</h1>
  <form #warehouseForm="ngForm">
    <div class="form-group row">
      <div class="col-6">
        <label for="warehouse-data">Warehouse Data</label>
        <textarea
          [(ngModel)]="warehouseInput"
          (ngModelChange)="parseWarehouseData()"
          name="name"
          rows="5"
          cols="50"
          name="warehouse"
          class="form-control"
          id="warehouse-data"
          #warehouseDataEl
        ></textarea>
        <br />

        <div class="d-flex p-2 result">
          {{ 'Total Quantity Available: ' + (warehouseTotalAvailable || 0) }}
        </div>
      </div>
      <div class="col-6 json">
        Preview:<br />
        <ul>
          <li *ngFor="let lot of warehouseDataPreview | keyvalue">
            <!-- <pre>{{ lot.value | json }}</pre> -->
            <b>Lot ID:</b>&nbsp;
            {{ lot.value.lotId }}
            <ul>
              <li>
                Available Quantity (all pallets in Lot):
                <b>{{ lot.value.availableQuant || 0 }}</b>
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
    <button type="submit" class="btn btn-success">Submit</button>
  </form>

  <hr />

  <form
    #poForm="ngForm"
    (keydown)="onKeydown($event, poForm)"
    (ngSubmit)="addOrderToSet()"
    novalidate
  >
    <div class="form-group row">
      <div class="col-6">
        <label>Purchase Order Address</label>
        <textarea
          [(ngModel)]="purchaseOrderAddressInput"
          rows="3"
          cols="50"
          name="purchaseOrderAddress"
          class="form-control"
        ></textarea>
        <label for="po-data">Purchase Order Data</label>
        <textarea
          [(ngModel)]="purchaseOrderDataInput"
          name="name"
          rows="5"
          cols="50"
          name="purchaseOrder"
          class="form-control"
          id="po-data"
          #purchaseOrderEl
        ></textarea>
      </div>
      <div class="col-6 json">
        <pre>{{ purchaseOrderPreview | json }}</pre>
        <table *ngFor="let po of poSet.orders" class="table">
          <thead>
            Ship to:
            {{
              po.shipTo
            }}
          </thead>
          <tbody>
            <tr *ngFor="let line of po.lines | keyvalue: lineNumberOrder">
              Line:
              {{
                line.value.line
              }}
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <button type="submit" class="btn btn-primary">
      Add PO to Set
    </button>
  </form>
</div>
